# wrangler.toml

name = "zgyd_monitor"
main = "worker/index.js"
compatibility_date = "2024-01-01" 

# =========================================================================
# Cron Triggers - 必须与 worker/index.js 中的映射表匹配
# =========================================================================
[triggers]
crons = [
  "0 19 * * *",
    # cleaner.yml             每日一次
    # UTC: 每日 19:00
    # CST: 每日 03:00
  "0 22 * * *",
    # scheduler.yml (TASK_1)  每日一次
    # UTC: 每日 22:00
    # CST: 每日 06:00
  "10 2,6,10,14,18,22 * * *",
    # scheduler.yml (TASK_2)  每 4 小时一次
    # UTC: 18:10, 22:10, 02:10, 06:10, 10:10, 14:10
    # CST: 02:10, 06:10, 10:10, 14:10, 18:10, 22:10
  "15,25,35,45,55 22-23,0-15 * * *",
    # scheduler.yml (TASK_3)  每日 06:00-23:59 每时 15, 25, 35, 45, 55 分执行
    # UTC: 22:15-55, 23:15-55, 00:15-55 - 15:15-55
    # CST: 06:15-55, 07:15-55, 08:15-55 - 23:15-55
]

# =========================================================================
# Worker 运行时环境变量 (非敏感信息)
# =========================================================================
[vars]
GITHUB_OWNER = "I-m-PhD"
GITHUB_REPO = "streamlit_zgyd"
TARGET_BRANCH = "main"

# =========================================================================
# Worker Observability
# =========================================================================

[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true